<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Jekyll 本地测试 | mySite4Test</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Jekyll 本地测试" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="测试 Primer theme" />
<meta property="og:description" content="测试 Primer theme" />
<link rel="canonical" href="https://georgedonnev2.github.io/blog/wsb/jekyll-local.html" />
<meta property="og:url" content="https://georgedonnev2.github.io/blog/wsb/jekyll-local.html" />
<meta property="og:site_name" content="mySite4Test" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Jekyll 本地测试" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"测试 Primer theme","headline":"Jekyll 本地测试","url":"https://georgedonnev2.github.io/blog/wsb/jekyll-local.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/blog/assets/css/style.css?v=f4427aec67d99e08a31bec1d751fd662c32acc47">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/blog/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="https://georgedonnev2.github.io/blog/">mySite4Test</a></h1>
      

      <h1 id="jekyll-本地测试">Jekyll 本地测试</h1>

<p>想到能否用 docker 运行 Jekyll。因为以前尝试 Jekyll 本地预览时，要装这装那。尤其是 Ruby 版本和 macOS 自带的 Ruby 还不一样，安装过程很折腾。咨询大模型后可行，就开始测试！</p>

<h2 id="添加国内仓库源">添加国内仓库源</h2>

<p>参考资料增加了国内仓库源。添加完成后的配置文件如下：</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">{</span>
  <span class="s2">"</span><span class="s">builder"</span><span class="pi">:</span> <span class="pi">{</span>
    <span class="s2">"</span><span class="s">gc"</span><span class="pi">:</span> <span class="pi">{</span>
      <span class="s2">"</span><span class="s">defaultKeepStorage"</span><span class="pi">:</span> <span class="s2">"</span><span class="s">20GB"</span><span class="pi">,</span>
      <span class="s2">"</span><span class="s">enabled"</span><span class="pi">:</span> <span class="nv">true</span>
    <span class="pi">}</span>
  <span class="pi">},</span>
  <span class="s2">"</span><span class="s">experimental"</span><span class="pi">:</span> <span class="nv">false</span><span class="pi">,</span>
  <span class="s2">"</span><span class="s">registry-mirrors"</span><span class="pi">:</span> <span class="pi">[</span>
    <span class="s2">"</span><span class="s">https://docker.1ms.run"</span><span class="pi">,</span>
    <span class="s2">"</span><span class="s">https://docker.m.daocloud.io"</span><span class="pi">,</span>
    <span class="s2">"</span><span class="s">https://docker.1panel.live"</span><span class="pi">,</span>
    <span class="s2">"</span><span class="s">https://dockerproxy.net"</span><span class="pi">,</span>
    <span class="s2">"</span><span class="s">https://docker.xuanyuan.me"</span><span class="pi">,</span>
    <span class="s2">"</span><span class="s">https://docker-0.unsee.tech"</span><span class="pi">,</span>
    <span class="s2">"</span><span class="s">https://registry.cyou"</span>
  <span class="pi">]</span>
<span class="pi">}</span>
</code></pre></div></div>

<h2 id="拉取镜像">拉取镜像</h2>

<p>咨询大模型后，得到拉取镜像命令如下：</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull jekyll/jekyll:latest
</code></pre></div></div>

<p>拉取完成后查看镜像：</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~ % docker image <span class="nb">ls
</span>REPOSITORY      TAG       IMAGE ID       CREATED         SIZE
jekyll/jekyll   latest    3c7afda80cab   3 years ago     829MB
</code></pre></div></div>

<h2 id="运行容器">运行容器</h2>

<p>执行命令启动容器：</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-it</span> <span class="nt">-v</span> ~/gdweb/log:/srv/jekyll <span class="nt">-p</span> 4000:4000 jekyll/jekyll jekyll serve
</code></pre></div></div>

<p>报错如下：</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-it</span> <span class="nt">-v</span> ~/gdweb/log:/srv/jekyll <span class="nt">-p</span> 4000:4000 jekyll/jekyll jekyll serve
ruby 3.1.1p18 <span class="o">(</span>2022-02-18 revision 53f5fc4236<span class="o">)</span> <span class="o">[</span>x86_64-linux-musl]
Configuration file: none
            Source: /srv/jekyll
       Destination: /srv/jekyll/_site
 Incremental build: disabled. Enable with <span class="nt">--incremental</span>
      Generating... 
                    <span class="k">done in </span>0.036 seconds.
 Auto-regeneration: enabled <span class="k">for</span> <span class="s1">'/srv/jekyll'</span>
                    <span class="nt">------------------------------------------------</span>
      Jekyll 4.2.2   Please append <span class="sb">`</span><span class="nt">--trace</span><span class="sb">`</span> to the <span class="sb">`</span>serve<span class="sb">`</span> <span class="nb">command 
                     </span><span class="k">for </span>any additional information or backtrace. 
                    <span class="nt">------------------------------------------------</span>
&lt;internal:/usr/local/lib/ruby/site_ruby/3.1.0/rubygems/core_ext/kernel_require.rb&gt;:85:in <span class="sb">`</span>require<span class="s1">': cannot load such file -- webrick (LoadError)
	from &lt;internal:/usr/local/lib/ruby/site_ruby/3.1.0/rubygems/core_ext/kernel_require.rb&gt;:85:in `require'</span>
	from /usr/gem/gems/jekyll-4.2.2/lib/jekyll/commands/serve/servlet.rb:3:in <span class="sb">`</span>&lt;top <span class="o">(</span>required<span class="o">)&gt;</span><span class="s1">'
	from /usr/gem/gems/jekyll-4.2.2/lib/jekyll/commands/serve.rb:179:in `require_relative'</span>
	from /usr/gem/gems/jekyll-4.2.2/lib/jekyll/commands/serve.rb:179:in <span class="sb">`</span>setup<span class="s1">'
	from /usr/gem/gems/jekyll-4.2.2/lib/jekyll/commands/serve.rb:100:in `process'</span>
	from /usr/gem/gems/jekyll-4.2.2/lib/jekyll/command.rb:91:in <span class="sb">`</span>block <span class="k">in </span>process_with_graceful_fail<span class="s1">'
	from /usr/gem/gems/jekyll-4.2.2/lib/jekyll/command.rb:91:in `each'</span>
	from /usr/gem/gems/jekyll-4.2.2/lib/jekyll/command.rb:91:in <span class="sb">`</span>process_with_graceful_fail<span class="s1">'
	from /usr/gem/gems/jekyll-4.2.2/lib/jekyll/commands/serve.rb:86:in `block (2 levels) in init_with_program'</span>
	from /usr/gem/gems/mercenary-0.4.0/lib/mercenary/command.rb:221:in <span class="sb">`</span>block <span class="k">in </span>execute<span class="s1">'
	from /usr/gem/gems/mercenary-0.4.0/lib/mercenary/command.rb:221:in `each'</span>
	from /usr/gem/gems/mercenary-0.4.0/lib/mercenary/command.rb:221:in <span class="sb">`</span>execute<span class="s1">'
	from /usr/gem/gems/mercenary-0.4.0/lib/mercenary/program.rb:44:in `go'</span>
	from /usr/gem/gems/mercenary-0.4.0/lib/mercenary.rb:21:in <span class="sb">`</span>program<span class="s1">'
	from /usr/gem/gems/jekyll-4.2.2/exe/jekyll:15:in `&lt;top (required)&gt;'</span>
	from /usr/gem/bin/jekyll:25:in <span class="sb">`</span>load<span class="s1">'
	from /usr/gem/bin/jekyll:25:in `&lt;main&gt;'</span>
</code></pre></div></div>

<p>咨询大模型后得到如下方案。依次执行就可以了。其中</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/gdweb/log

<span class="c"># 创建新的 Jekyll 站点</span>
docker run <span class="nt">--rm</span> <span class="nt">-it</span> <span class="nt">-v</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>:/srv/jekyll jekyll/jekyll jekyll new <span class="nb">.</span> <span class="nt">--force</span>


<span class="c"># 安装 webrick</span>
docker run <span class="nt">--rm</span> <span class="nt">-it</span> <span class="nt">-v</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>:/srv/jekyll jekyll/jekyll bundle add webrick

<span class="c"># 启动服务</span>
docker run <span class="nt">--rm</span> <span class="nt">-v</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>:/srv/jekyll <span class="nt">-p</span> 4000:4000 jekyll/jekyll jekyll serve
</code></pre></div></div>

<p>其中，第1个命令“创建新的 Jekyll站点”，运行后没有退出，按 <code class="language-plaintext highlighter-rouge">ctrl</code>+<code class="language-plaintext highlighter-rouge">c</code> 后退出。</p>

<p>3个命令依次执行后，在本地浏览器输入 <code class="language-plaintext highlighter-rouge">localhost:4000</code> 就可以看到网页了。</p>

<h2 id="创建-github-仓库-log-并关联到-gdwebblog">创建 github 仓库 log 并关联到 ~/gdweb/blog</h2>

<p>在 github 上创建仓库 <code class="language-plaintext highlighter-rouge">blog</code> ，过程略。</p>

<p>然后在本地依次执行以下命令，就可以把内容推动到 github 了。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/gdweb/blog
git remote add origin git@github.com:georgedonnev2/blog.git
git branch <span class="nt">-M</span> master
git status
git add <span class="nb">.</span>
git commit <span class="nt">-m</span> <span class="s2">"1st commit"</span>
git push <span class="nt">-u</span> origin master
</code></pre></div></div>

<h2 id="使用-jekyll-primer-spec-主题">使用 jekyll-primer-spec 主题</h2>

<p>更新 Gemfile</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/gdweb/log
<span class="nb">echo</span> <span class="s1">'gem "jekyll-primer-spec"'</span> <span class="o">&gt;&gt;</span> Gemfile
</code></pre></div></div>

<p>查看 Gemfile，行末增加了 <code class="language-plaintext highlighter-rouge">gem "jekyll-primer-spec"</code>。</p>

<p>更新 _config.yml
先保存一份，<code class="language-plaintext highlighter-rouge">mv _config.yml _config.yml_bk</code>
再执行以下命令：</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="o">&gt;</span> _config.yml <span class="o">&lt;&lt;</span> <span class="sh">'</span><span class="no">EOF</span><span class="sh">'
title: "我的博客"
description: "使用 jekyll-primer-spec 主题"
baseurl: ""  # 根路径
# url: "https://georgedonnev2.github.io"  # 你的 GitHub Pages 地址

# 主题设置
theme: jekyll-primer-spec

# 构建输出目录（GitHub Pages 使用 docs 目录）
destination: ./docs

# 插件
plugins:
  - jekyll-feed

# Markdown 设置
markdown: kramdown
highlighter: rouge
</span><span class="no">EOF
</span></code></pre></div></div>

<p>先注释掉 <code class="language-plaintext highlighter-rouge">url: "https://georgedonnev2.github.io"</code></p>

<p>创建新的首页：</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 备份原来的 index.markdown</span>
<span class="nb">mv </span>index.markdown index.markdown.backup

<span class="c"># 创建新的首页</span>
<span class="nb">cat</span> <span class="o">&gt;</span> index.md <span class="o">&lt;&lt;</span> <span class="sh">'</span><span class="no">EOF</span><span class="sh">'
---
layout: home
title: 首页
---

# 欢迎来到我的博客

这是一个使用 jekyll-primer-spec 主题的博客。



## 关于

更多内容正在建设中...
</span><span class="no">EOF
</span></code></pre></div></div>

<p>创建 docker_compose.yml</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="o">&gt;</span> docker-compose.yml <span class="o">&lt;&lt;</span> <span class="sh">'</span><span class="no">EOF</span><span class="sh">'
version: '3'
services:
  jekyll:
    image: jekyll/jekyll:latest
    ports:
      - "4000:4000"
    volumes:
      - ~/gdweb/log:/srv/jekyll
    command: &gt;
      sh -c "bundle install &amp;&amp;
             bundle exec jekyll serve --host 0.0.0.0 --watch --force_polling"
</span><span class="no">EOF
</span></code></pre></div></div>

<p>更新 .gitingnore</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="o">&gt;&gt;</span> .gitignore <span class="o">&lt;&lt;</span> <span class="sh">'</span><span class="no">EOF</span><span class="sh">'

# Jekyll 生成的文件
_site/
.jekyll-cache/
.jekyll-metadata

# 构建输出目录（docs 需要提交，所以不加 docs/）
</span><span class="no">EOF
</span></code></pre></div></div>

<p>执行 <code class="language-plaintext highlighter-rouge">docker-compose up</code> 后报错如下：</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~/gdweb/log % docker-compose up 
WARN[0000] /Users/george1442/gdweb/log/docker-compose.yml: the attribute <span class="sb">`</span>version<span class="sb">`</span> is obsolete, it will be ignored, please remove it to avoid potential confusion 
<span class="o">[</span>+] Running 2/2
 ✔ Network log_default     Created                                                                                      0.1s 
 ✔ Container log-jekyll-1  Created                                                                                      0.1s 
Attaching to jekyll-1
jekyll-1  | Fetching gem metadata from https://rubygems.org/..........
jekyll-1  | Could not find gem <span class="s1">'jekyll-primer-spec'</span> <span class="k">in </span>rubygems repository
jekyll-1  | https://rubygems.org/ or installed locally.
jekyll-1 exited with code 7
</code></pre></div></div>

<hr />
<p>终止。网络问题，无法访问 github page 228</p>

<h2 id="使用-primer-主题">使用 primer 主题</h2>

<p>1、用docker-compose运行jekyll latest
2、使用 primer 主题。不适用默认的minima主题
3、docker的持久化目录在 ~/gdweb/blog。而不是日志在 ~/gdweb/blog
4、本地可预览
5、github pages上，仓库是 georgedonnev2/blog ，网站内容在 /docs
6、最精简的配置，先跑起来。
7、只有一个 index.md</p>

<h2 id="参考资料">参考资料</h2>

<ul>
  <li><a href="https://www.bilibili.com/video/BV1q7i9BTE4N">2026最新零基础安装，10分钟学会跑本地AI/n8n/Ollama —— Docker Desktop 保姆级教学 —— 附汉化+国内镜像源</a>，B站，小in分享，2026-01-09</li>
</ul>



      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
